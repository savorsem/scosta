# Проект: SALI Automata — Аудит и управление AI-агентами на платформе n8n

## Описание

**SALI Automata** — это проект по созданию прозрачной системы управления, аудита и надстройки над AI-агентами на базе n8n для бизнеса и исследований. В этот репозиторий включаются готовые workflow-шаблоны с подробной историей изменений, а также документация, инструкции по интеграции и примеры кода (кодекс). Проект ориентирован на автоматизацию задач в Telegram и Todoist, полную обработку мультимедиа, стратегическое планирование, интеграции с внешними системами (Notion, Rube, Tavily, Zapier MCP) с поддержкой ролевых LLM.

---

## История и эволюция

### 1. SALI CORE (Telegram-агент)
- **Назначение:** Автономный AI-помощник в Telegram с мультимодальной обработкой (текст, фото, видео, аудио), интеграциями и адаптивными планами.
- **Возможности:**
  - Запуск через Telegram триггер.
  - Интеграция с Zep Memory (личный контекст пользователя).
  - Авто-разветвление по типу контента (Router).
  - Фото и видео → Gemini Vision для анализа.
  - Голос → транскрипция.
  - Все запросы проходят стратегическое планирование (Think).
  - Генерация адаптивных планов.
  - Сохранение и аудит задач через Todoist/Notion/MCP.

### 2. SALI Agent v2.0 (Optimized) (Todoist-сценарии)
- **Назначение:** Автономная работа с задачами из Todoist — анализ, исполнение, подзадачи, прогресс-отчёты, динамика статусов.
- **Возможности:**
  - Приём задач через вебхук из Todoist.
  - Детальный анализ задачи (content/description/url).
  - Ветвление: простая задача → калькулятор, сложная → Think-модуль.
  - Гибкий выбор инструментов поиска, работы с кодом, интеграций.
  - Прогресс и отчёты возвращаются в Telegram и Todoist.

---

## Работа с шаблонами n8n

### Импорт

1. Склонируйте репозиторий.
2. Импортируйте файлы шаблонов в свой n8n:
   - `SALI CORE (3).json` — основной Telegram AI-агент.
   - `SALI Agent v2.0 (Optimized) (1).json` — интеграция с Todoist и аналитика задач.

### Структура репозитория

```
/workflows/
  SALI CORE (3).json
  SALI Agent v2.0 (Optimized) (1).json
/docs/
  HISTORY.md
  CODEX_USAGE.md
  README.md
  CUSTOMIZATION.md
LICENSE
```

---

## Быстрый старт (через кодекс)

**Пример: Получить список всех инструментов агента и сделать аудит в Notion**
```python
import requests

# Пример запроса к Telegram SALI CORE-агенту через API n8n
url = "https://<ваш-n8n>/webhook/telegram-logistics-bot"
message = {"text": "Полный список всех моих подключённых инструментов. Сделай полный аудит инструментов и сохрани в Notion"}
r = requests.post(url, json=message)
print(r.json())

# Ответ агента содержит полный аудит с выгрузкой в Notion и Markdown-отчётом.
```

**Пример: Добавление задачи в Todoist-AI**
```python
import requests

url = "https://<ваш-n8n>/webhook/todo"
data = {
  "body": {
    "event_data": {
      "content": "Провести аудит всех интеграций MCP",
      "description": "Проверить, какие инструменты и API доступны.",
      "url": "https://app.todoist.com/app/task/123"
    }
  }
}
r = requests.post(url, json=data)
# После этого SALI Agent выполняет разбор, исполнение и возврат статуса.
```

---

## Работа через кодекс

- В директории `/docs/CODEX_USAGE.md` будут собраны полные примеры вызовов REST, curl, Python (requests), Node.js и интеграции с внешними API для работы и аудита workflow.
- Все пути trigger-ов и параметры вынесены в описание каждой ноды.
- Каждый workflow снабжен метаданными для чтения/модификации без GUI.

---

## История изменений

Все изменения и улучшения шаблонов (от логики роутинга до стратегического планирования) ведутся в `/docs/HISTORY.md`:
- Обновления трекеров, моделей, интеграций.
- Оптимизации по скорости и итерациям.
- Аудит и логика fallback для кейсов отказа сервисов.

---

## Использование и расширение

- **Клонирование:** Проект полностью поддерживает forking и доработку новых цепочек интеграций.
- **Безопасность:** Ключи и токены не входят в шаблоны, их нужно добавить вручную в настройках n8n.
- **Логика:** Все роли — прозрачны, промты вынесены для кастомизации.

---

## Лицензия

Проект распространяется под MIT License, все условия открытого использования в LICENSE.

---

## Документация

- [Полная история изменений](docs/HISTORY.md)
- [Кодекс — работа через API](docs/CODEX_USAGE.md)
- [README для быстрой интеграции](README.md)
